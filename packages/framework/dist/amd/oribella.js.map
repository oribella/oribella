{"version":3,"sources":["../../src/oribella.js"],"names":[],"mappings":";;;;;;;;;;;;;;MAQa;AACX,aADW,QACX,CAAY,OAAZ,EAAqB,MAArB,EAA6B;4BADlB,UACkB;;AAC3B,WAAK,OAAL,GAAe,OAAf,CAD2B;AAE3B,WAAK,MAAL,GAAc,MAAd,CAF2B;AAG3B,WAAK,QAAL,GAAgB,wBAAhB,CAH2B;AAI3B,WAAK,MAAL,GAAc,mBAAW,KAAK,OAAL,EACvB,KAAK,QAAL,EACA,KAAK,OAAL,CAAa,IAAb,CAAkB,IAAlB,CAFY,EAGZ,KAAK,kBAAL,CAAwB,IAAxB,CAA6B,IAA7B,CAHY,CAAd,CAJ2B;KAA7B;;AADW,uBAWX,+BAAW;AACT,aAAO,KAAK,MAAL,CAAY,QAAZ,EAAP,CADS;;;AAXA,uBAcX,6DAA0B;AACxB,UAAI,KAAK,MAAL,CAAY,gBAAZ,EAA8B;AAChC,aAAK,MAAL,CAAY,OAAZ,CAAoB,6BAAkB,KAAK,OAAL,cAAlB,CAApB,EADgC;AAEhC,eAAO,IAAP,CAFgC;OAAlC;AAIA,UAAI,KAAK,MAAL,CAAY,cAAZ,EAA4B;AAC9B,aAAK,MAAL,CAAY,OAAZ,CAAoB,yBAAgB,KAAK,OAAL,cAAhB,CAApB,EAD8B;AAE9B,eAAO,IAAP,CAF8B;OAAhC;;AAKA,UAAI,KAAK,MAAL,CAAY,YAAZ,EAA0B;AAC5B,aAAK,MAAL,CAAY,OAAZ,CAAoB,qBAAc,KAAK,OAAL,cAAd,CAApB,EAD4B;OAA9B;;AAIA,WAAK,MAAL,CAAY,OAAZ,CAAoB,qBAAc,KAAK,OAAL,cAAd,CAApB,EAdwB;AAexB,aAAO,IAAP,CAfwB;;;AAdf,uBA+BX,2CAAgB,MAAM,SAAS;AAC7B,WAAK,MAAL,CAAY,eAAZ,CAA4B,IAA5B,EAAkC,OAAlC,EAD6B;AAE7B,aAAO,IAAP,CAF6B;;;AA/BpB,uBAmCX,iBAAG,SAAS,MAAM,YAAY;AAC5B,aAAO,KAAK,MAAL,CAAY,SAAZ,CAAsB,OAAtB,EAA+B,IAA/B,EAAqC,UAArC,CAAP,CAD4B;;;AAnCnB,uBAsCX,2BAAQ,GAAG;AACT,UAAI,KAAK,MAAL,CAAY,gBAAZ,IAAgC,EAAE,WAAF,KAAkB,EAAE,oBAAF,EAAwB;;AAC5E,eAAO,IAAP,CAD4E;OAA9E;AAGA,UAAI,KAAK,MAAL,CAAY,cAAZ,IAA8B,EAAE,WAAF,KAAkB,OAAlB,EAA2B;;AAC3D,eAAO,IAAP,CAD2D;OAA7D;AAGA,UAAI,EAAE,IAAF,CAAO,OAAP,CAAe,OAAf,MAA4B,CAAC,CAAD,EAAI;AAClC,eAAO,IAAP,CADkC;OAApC;AAGA,aAAO,KAAP,CAVS;;;AAtCA,uBAkDX,iDAAmB,OAAO,YAAY;AACpC,UAAI,MAAM,MAAM,MAAN;UACR,QAAQ,MAAM,KAAN;UACR,SAFF,CADoC;;AAKpC,kBAAY,CAAE,KAAD,IAAU,QAAQ,SAAR,GACR,MAAM,CAAN,GAAU,CAAV,GAAe,MAAM,CAAN,GAAU,CAAV,GAAe,MAAM,CAAN,GAAU,CAAV,GAAc,CAAd,GAC/B,KAFF,CALwB;AAQpC,aAAO,MAAM,OAAN,CAAc,UAAd,IAA4B,WAAW,IAAX,CAAgB,UAAU,GAAV,EAAe;AAChE,eAAO,cAAc,GAAd,CADyD;OAAf,CAA5C,GAEF,cAAc,UAAd,CAV+B;;;WAlD3B","file":"oribella.js","sourcesContent":["import {Engine} from \"./engine\";\nimport {Registry} from \"./registry\";\nimport {MouseFlow} from \"./flows/mouse\";\nimport {TouchFlow} from \"./flows/touch\";\nimport {MSPointerFlow} from \"./flows/ms-pointer\";\nimport {PointerFlow} from \"./flows/pointer\";\nimport {Point} from \"./point\";\n\nexport class Oribella {\n  constructor(element, config) {\n    this.element = element;\n    this.config = config;\n    this.registry = new Registry();\n    this.engine = new Engine(this.element,\n      this.registry,\n      this.isMouse.bind(this),\n      this.isValidMouseButton.bind(this)\n    );\n  }\n  activate() {\n    return this.engine.activate();\n  }\n  withDefaultFlowStrategy() {\n    if (this.config.msPointerEnabled) {\n      this.engine.addFlow(new MSPointerFlow(this.element, Point));\n      return this;\n    }\n    if (this.config.pointerEnabled) {\n      this.engine.addFlow(new PointerFlow(this.element, Point));\n      return this;\n    }\n\n    if (this.config.touchEnabled) {\n      this.engine.addFlow(new TouchFlow(this.element, Point));\n    }\n\n    this.engine.addFlow(new MouseFlow(this.element, Point));\n    return this;\n  }\n  registerGesture(type, Gesture) {\n    this.engine.registerGesture(type, Gesture);\n    return this;\n  }\n  on(element, type, subscriber) {\n    return this.engine.addHandle(element, type, subscriber);\n  }\n  isMouse(e) {\n    if (this.config.msPointerEnabled && e.pointerType === e.MSPOINTER_TYPE_MOUSE) { //IE10\n      return true;\n    }\n    if (this.config.pointerEnabled && e.pointerType === \"mouse\") { //IE11\n      return true;\n    }\n    if (e.type.indexOf(\"mouse\") !== -1) {\n      return true;\n    }\n    return false;\n  }\n  isValidMouseButton(event, allowedBtn) {\n    var btn = event.button,\n      which = event.which,\n      actualBtn;\n\n    actualBtn = (!which && btn !== undefined) ?\n                  (btn & 1 ? 1 : (btn & 2 ? 3 : (btn & 4 ? 2 : 0))) :\n                  which;\n    return Array.isArray(allowedBtn) ? allowedBtn.some(function (val) {\n      return actualBtn === val;\n    }) : actualBtn === allowedBtn;\n  }\n}\n"]}