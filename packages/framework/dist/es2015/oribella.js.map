{"version":3,"sources":["../../src/oribella.js"],"names":[],"mappings":"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","file":"oribella.js","sourcesContent":["import {Engine} from \"./engine\";\nimport {Registry} from \"./registry\";\nimport {MouseFlow} from \"./flows/mouse\";\nimport {TouchFlow} from \"./flows/touch\";\nimport {MSPointerFlow} from \"./flows/ms-pointer\";\nimport {PointerFlow} from \"./flows/pointer\";\nimport {Point} from \"./point\";\n\nexport class Oribella {\n  constructor(element, config) {\n    this.element = element;\n    this.config = config;\n    this.registry = new Registry();\n    this.engine = new Engine(this.element,\n      this.registry,\n      this.isMouse.bind(this),\n      this.isValidMouseButton.bind(this)\n    );\n  }\n  activate() {\n    return this.engine.activate();\n  }\n  withDefaultFlowStrategy() {\n    if (this.config.msPointerEnabled) {\n      this.engine.addFlow(new MSPointerFlow(this.element, Point));\n      return this;\n    }\n    if (this.config.pointerEnabled) {\n      this.engine.addFlow(new PointerFlow(this.element, Point));\n      return this;\n    }\n\n    if (this.config.touchEnabled) {\n      this.engine.addFlow(new TouchFlow(this.element, Point));\n    }\n\n    this.engine.addFlow(new MouseFlow(this.element, Point));\n    return this;\n  }\n  registerGesture(type, Gesture) {\n    this.engine.registerGesture(type, Gesture);\n    return this;\n  }\n  on(element, type, subscriber) {\n    return this.engine.addHandle(element, type, subscriber);\n  }\n  isMouse(e) {\n    if (this.config.msPointerEnabled && e.pointerType === e.MSPOINTER_TYPE_MOUSE) { //IE10\n      return true;\n    }\n    if (this.config.pointerEnabled && e.pointerType === \"mouse\") { //IE11\n      return true;\n    }\n    if (e.type.indexOf(\"mouse\") !== -1) {\n      return true;\n    }\n    return false;\n  }\n  isValidMouseButton(event, allowedBtn) {\n    var btn = event.button,\n      which = event.which,\n      actualBtn;\n\n    actualBtn = (!which && btn !== undefined) ?\n                  (btn & 1 ? 1 : (btn & 2 ? 3 : (btn & 4 ? 2 : 0))) :\n                  which;\n    return Array.isArray(allowedBtn) ? allowedBtn.some(function (val) {\n      return actualBtn === val;\n    }) : actualBtn === allowedBtn;\n  }\n}\n"]}