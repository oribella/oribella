{"version":3,"sources":["../../src/oribella.js"],"names":[],"mappings":";;;;;;;;;;;;;AAAQ;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;0BAEK;AACX,iBADW,QACX,CAAY,OAAZ,EAAqB,MAArB,EAA6B;gCADlB,UACkB;;AAC3B,eAAK,OAAL,GAAe,OAAf,CAD2B;AAE3B,eAAK,MAAL,GAAc,MAAd,CAF2B;AAG3B,eAAK,QAAL,GAAgB,IAAI,QAAJ,EAAhB,CAH2B;AAI3B,eAAK,MAAL,GAAc,IAAI,MAAJ,CAAW,KAAK,OAAL,EACvB,KAAK,QAAL,EACA,KAAK,OAAL,CAAa,IAAb,CAAkB,IAAlB,CAFY,EAGZ,KAAK,kBAAL,CAAwB,IAAxB,CAA6B,IAA7B,CAHY,CAAd,CAJ2B;SAA7B;;AADW,2BAWX,+BAAW;AACT,iBAAO,KAAK,MAAL,CAAY,QAAZ,EAAP,CADS;;;AAXA,2BAcX,6DAA0B;AACxB,cAAI,KAAK,MAAL,CAAY,gBAAZ,EAA8B;AAChC,iBAAK,MAAL,CAAY,OAAZ,CAAoB,IAAI,aAAJ,CAAkB,KAAK,OAAL,EAAc,KAAhC,CAApB,EADgC;AAEhC,mBAAO,IAAP,CAFgC;WAAlC;AAIA,cAAI,KAAK,MAAL,CAAY,cAAZ,EAA4B;AAC9B,iBAAK,MAAL,CAAY,OAAZ,CAAoB,IAAI,WAAJ,CAAgB,KAAK,OAAL,EAAc,KAA9B,CAApB,EAD8B;AAE9B,mBAAO,IAAP,CAF8B;WAAhC;;AAKA,cAAI,KAAK,MAAL,CAAY,YAAZ,EAA0B;AAC5B,iBAAK,MAAL,CAAY,OAAZ,CAAoB,IAAI,SAAJ,CAAc,KAAK,OAAL,EAAc,KAA5B,CAApB,EAD4B;WAA9B;;AAIA,eAAK,MAAL,CAAY,OAAZ,CAAoB,IAAI,SAAJ,CAAc,KAAK,OAAL,EAAc,KAA5B,CAApB,EAdwB;AAexB,iBAAO,IAAP,CAfwB;;;AAdf,2BA+BX,2CAAgB,MAAM,SAAS;AAC7B,eAAK,MAAL,CAAY,eAAZ,CAA4B,IAA5B,EAAkC,OAAlC,EAD6B;AAE7B,iBAAO,IAAP,CAF6B;;;AA/BpB,2BAmCX,iBAAG,SAAS,MAAM,YAAY;AAC5B,iBAAO,KAAK,MAAL,CAAY,SAAZ,CAAsB,OAAtB,EAA+B,IAA/B,EAAqC,UAArC,CAAP,CAD4B;;;AAnCnB,2BAsCX,2BAAQ,GAAG;AACT,cAAI,KAAK,MAAL,CAAY,gBAAZ,IAAgC,EAAE,WAAF,KAAkB,EAAE,oBAAF,EAAwB;;AAC5E,mBAAO,IAAP,CAD4E;WAA9E;AAGA,cAAI,KAAK,MAAL,CAAY,cAAZ,IAA8B,EAAE,WAAF,KAAkB,OAAlB,EAA2B;;AAC3D,mBAAO,IAAP,CAD2D;WAA7D;AAGA,cAAI,EAAE,IAAF,CAAO,OAAP,CAAe,OAAf,MAA4B,CAAC,CAAD,EAAI;AAClC,mBAAO,IAAP,CADkC;WAApC;AAGA,iBAAO,KAAP,CAVS;;;AAtCA,2BAkDX,iDAAmB,OAAO,YAAY;AACpC,cAAI,MAAM,MAAM,MAAN;cACR,QAAQ,MAAM,KAAN;cACR,SAFF,CADoC;;AAKpC,sBAAY,CAAE,KAAD,IAAU,QAAQ,SAAR,GACR,MAAM,CAAN,GAAU,CAAV,GAAe,MAAM,CAAN,GAAU,CAAV,GAAe,MAAM,CAAN,GAAU,CAAV,GAAc,CAAd,GAC/B,KAFF,CALwB;AAQpC,iBAAO,MAAM,OAAN,CAAc,UAAd,IAA4B,WAAW,IAAX,CAAgB,UAAU,GAAV,EAAe;AAChE,mBAAO,cAAc,GAAd,CADyD;WAAf,CAA5C,GAEF,cAAc,UAAd,CAV+B;;;eAlD3B","file":"oribella.js","sourcesContent":["import {Engine} from \"./engine\";\nimport {Registry} from \"./registry\";\nimport {MouseFlow} from \"./flows/mouse\";\nimport {TouchFlow} from \"./flows/touch\";\nimport {MSPointerFlow} from \"./flows/ms-pointer\";\nimport {PointerFlow} from \"./flows/pointer\";\nimport {Point} from \"./point\";\n\nexport class Oribella {\n  constructor(element, config) {\n    this.element = element;\n    this.config = config;\n    this.registry = new Registry();\n    this.engine = new Engine(this.element,\n      this.registry,\n      this.isMouse.bind(this),\n      this.isValidMouseButton.bind(this)\n    );\n  }\n  activate() {\n    return this.engine.activate();\n  }\n  withDefaultFlowStrategy() {\n    if (this.config.msPointerEnabled) {\n      this.engine.addFlow(new MSPointerFlow(this.element, Point));\n      return this;\n    }\n    if (this.config.pointerEnabled) {\n      this.engine.addFlow(new PointerFlow(this.element, Point));\n      return this;\n    }\n\n    if (this.config.touchEnabled) {\n      this.engine.addFlow(new TouchFlow(this.element, Point));\n    }\n\n    this.engine.addFlow(new MouseFlow(this.element, Point));\n    return this;\n  }\n  registerGesture(type, Gesture) {\n    this.engine.registerGesture(type, Gesture);\n    return this;\n  }\n  on(element, type, subscriber) {\n    return this.engine.addHandle(element, type, subscriber);\n  }\n  isMouse(e) {\n    if (this.config.msPointerEnabled && e.pointerType === e.MSPOINTER_TYPE_MOUSE) { //IE10\n      return true;\n    }\n    if (this.config.pointerEnabled && e.pointerType === \"mouse\") { //IE11\n      return true;\n    }\n    if (e.type.indexOf(\"mouse\") !== -1) {\n      return true;\n    }\n    return false;\n  }\n  isValidMouseButton(event, allowedBtn) {\n    var btn = event.button,\n      which = event.which,\n      actualBtn;\n\n    actualBtn = (!which && btn !== undefined) ?\n                  (btn & 1 ? 1 : (btn & 2 ? 3 : (btn & 4 ? 2 : 0))) :\n                  which;\n    return Array.isArray(allowedBtn) ? allowedBtn.some(function (val) {\n      return actualBtn === val;\n    }) : actualBtn === allowedBtn;\n  }\n}\n"]}