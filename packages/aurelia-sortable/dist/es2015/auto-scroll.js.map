{"version":3,"sources":["../../src/auto-scroll.js"],"names":[],"mappings":";;AAAA,SAAQ,SAAR,QAAwB,8BAAxB;;AAGA,WAAa,qBADZ,2BACM,MAAM,UAAN,CAAiB;;SACtB,QAAQ,CAAC,CAAD;SACR,QAAQ;SACR,SAAS;GAHa;;AAKtB,QAAM,QAAQ,EAAR,EAAY;AAChB,SAAK,KAAL,GAAa,KAAb,CADgB;GAAlB;AAGA,SAAO,OAAP,EAAgB,IAAhB,EAAsB,IAAtB,EAA4B,SAA5B,EAAuC,SAAvC,EAAkD;AAChD,QAAI,KAAK,MAAL,EAAa;AACf,UAAI,SAAS,CAAT,IAAc,SAAS,CAAT,EAAY;AAC5B,6BAAqB,KAAK,KAAL,CAArB,CAD4B;AAE5B,aAAK,MAAL,GAAc,KAAd,CAF4B;OAA9B;AAIA,aALe;KAAjB;AAOA,QAAI,SAAS,CAAT,IAAc,SAAS,CAAT,EAAY;AAC5B,aAD4B;KAA9B;;AAIA,QAAI,cAAc,CAAd,IAAmB,cAAc,CAAd,EAAiB;AACtC,aADsC;KAAxC;;AAIA,UAAM,eAAe,OAAO,KAAK,KAAL,CAhBoB;AAiBhD,UAAM,eAAe,OAAO,KAAK,KAAL,CAjBoB;;AAmBhD,UAAM,aAAa,MAAM;;AAEvB,UAAK,CAAC,KAAK,MAAL,EAAc;AAClB,eADkB;OAApB;AAGA,UAAI,YAAY,CAAZ,EAAe;AACjB,gBAAQ,UAAR,IAAsB,YAAtB,CADiB;OAAnB;AAGA,UAAI,YAAY,CAAZ,EAAe;AACjB,gBAAQ,SAAR,IAAqB,YAArB,CADiB;OAAnB;;AAIA,QAAE,SAAF,CAZuB;AAavB,QAAE,SAAF,CAbuB;AAcvB,UAAI,aAAa,CAAb,IAAkB,aAAa,CAAb,EAAgB;AACpC,aAAK,MAAL,GAAc,KAAd,CADoC;AAEpC,eAFoC;OAAtC;;AAKA,WAAK,KAAL,GAAa,sBAAsB,UAAtB,CAAb,CAnBuB;KAAN,CAnB6B;;AAyChD,SAAK,MAAL,GAAc,IAAd,CAzCgD;AA0ChD,iBA1CgD;GAAlD;AA4CA,MAAI,MAAM,oBAAN,EAA4B;AAC9B,QAAI,KAAK,KAAL,CAAJ,CAD8B;AAE9B,SAAK,MAAL,GAAc,KAAd,CAF8B;GAAhC;CApDK,aAAP","file":"auto-scroll.js","sourcesContent":["import {transient} from \"aurelia-dependency-injection\";\n\n@transient()\nexport class AutoScroll {\n  rAFId = -1;\n  speed = 10;\n  active = false;\n\n  start(speed = 10) {\n    this.speed = speed;\n  }\n  update(element, dirX, dirY, frameCntX, frameCntY) {\n    if (this.active) {\n      if (dirX === 0 && dirY === 0) {\n        cancelAnimationFrame(this.rAFId);\n        this.active = false;\n      }\n      return;\n    }\n    if (dirX === 0 && dirY === 0) {\n      return;\n    }\n\n    if (frameCntX === 0 && frameCntY === 0) {\n      return;\n    }\n\n    const scrollDeltaX = dirX * this.speed;\n    const scrollDeltaY = dirY * this.speed;\n\n    const autoScroll = () => {\n\n      if ( !this.active ) {\n        return;\n      }\n      if (frameCntX > 0) {\n        element.scrollLeft += scrollDeltaX;\n      }\n      if (frameCntY > 0) {\n        element.scrollTop += scrollDeltaY;\n      }\n\n      --frameCntX;\n      --frameCntY;\n      if (frameCntX <= 0 && frameCntY <= 0) {\n        this.active = false;\n        return;\n      }\n\n      this.rAFId = requestAnimationFrame(autoScroll);\n    };\n\n    this.active = true;\n    autoScroll();\n  }\n  end(cAF = cancelAnimationFrame) {\n    cAF(this.rAFId);\n    this.active = false;\n  }\n}\n"]}