{"version":3,"sources":["../../src/auto-scroll.js"],"names":["AutoScroll","rAFId","speed","active","start","update","element","dirX","dirY","frameCntX","frameCntY","cancelAnimationFrame","scrollDeltaX","scrollDeltaY","autoScroll","scrollLeft","scrollTop","requestAnimationFrame","end","cAF"],"mappings":";;;;;;;;;;;;;;;;MAGaA,U,WAAAA,U,WADZ,4C;;;;WAECC,K,GAAQ,CAAC,C;WACTC,K,GAAQ,E;WACRC,M,GAAS,K;;;yBAETC,K,oBAAkB;AAAA,UAAZF,KAAY,uEAAJ,EAAI;;AAChB,WAAKA,KAAL,GAAaA,KAAb;AACD,K;;yBACDG,M,mBAAOC,O,EAASC,I,EAAMC,I,EAAMC,S,EAAWC,S,EAAW;AAAA;;AAChD,UAAI,KAAKP,MAAT,EAAiB;AACf,YAAII,SAAS,CAAT,IAAcC,SAAS,CAA3B,EAA8B;AAC5BG,+BAAqB,KAAKV,KAA1B;AACA,eAAKE,MAAL,GAAc,KAAd;AACD;AACD;AACD;AACD,UAAII,SAAS,CAAT,IAAcC,SAAS,CAA3B,EAA8B;AAC5B;AACD;;AAED,UAAIC,cAAc,CAAd,IAAmBC,cAAc,CAArC,EAAwC;AACtC;AACD;;AAED,UAAME,eAAeL,OAAO,KAAKL,KAAjC;AACA,UAAMW,eAAeL,OAAO,KAAKN,KAAjC;;AAEA,UAAMY,aAAa,SAAbA,UAAa,GAAM;;AAEvB,YAAK,CAAC,MAAKX,MAAX,EAAoB;AAClB;AACD;AACD,YAAIM,YAAY,CAAhB,EAAmB;AACjBH,kBAAQS,UAAR,IAAsBH,YAAtB;AACD;AACD,YAAIF,YAAY,CAAhB,EAAmB;AACjBJ,kBAAQU,SAAR,IAAqBH,YAArB;AACD;;AAED,UAAEJ,SAAF;AACA,UAAEC,SAAF;AACA,YAAID,aAAa,CAAb,IAAkBC,aAAa,CAAnC,EAAsC;AACpC,gBAAKP,MAAL,GAAc,KAAd;AACA;AACD;;AAED,cAAKF,KAAL,GAAagB,sBAAsBH,UAAtB,CAAb;AACD,OApBD;;AAsBA,WAAKX,MAAL,GAAc,IAAd;AACAW;AACD,K;;yBACDI,G,kBAAgC;AAAA,UAA5BC,GAA4B,uEAAtBR,oBAAsB;;AAC9BQ,UAAI,KAAKlB,KAAT;AACA,WAAKE,MAAL,GAAc,KAAd;AACD,K","file":"auto-scroll.js","sourcesContent":["import {transient} from \"aurelia-dependency-injection\";\n\n@transient()\nexport class AutoScroll {\n  rAFId = -1;\n  speed = 10;\n  active = false;\n\n  start(speed = 10) {\n    this.speed = speed;\n  }\n  update(element, dirX, dirY, frameCntX, frameCntY) {\n    if (this.active) {\n      if (dirX === 0 && dirY === 0) {\n        cancelAnimationFrame(this.rAFId);\n        this.active = false;\n      }\n      return;\n    }\n    if (dirX === 0 && dirY === 0) {\n      return;\n    }\n\n    if (frameCntX === 0 && frameCntY === 0) {\n      return;\n    }\n\n    const scrollDeltaX = dirX * this.speed;\n    const scrollDeltaY = dirY * this.speed;\n\n    const autoScroll = () => {\n\n      if ( !this.active ) {\n        return;\n      }\n      if (frameCntX > 0) {\n        element.scrollLeft += scrollDeltaX;\n      }\n      if (frameCntY > 0) {\n        element.scrollTop += scrollDeltaY;\n      }\n\n      --frameCntX;\n      --frameCntY;\n      if (frameCntX <= 0 && frameCntY <= 0) {\n        this.active = false;\n        return;\n      }\n\n      this.rAFId = requestAnimationFrame(autoScroll);\n    };\n\n    this.active = true;\n    autoScroll();\n  }\n  end(cAF = cancelAnimationFrame) {\n    cAF(this.rAFId);\n    this.active = false;\n  }\n}\n"]}