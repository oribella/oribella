{"version":3,"sources":["../../src/drag.js"],"names":[],"mappings":"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","file":"drag.js","sourcesContent":["import {transient} from \"aurelia-dependency-injection\";\n\n@transient()\nexport class Drag {\n  startLeft = 0;\n  startTop = 0;\n  rect = { left: 0, top: 0, width: 0, height: 0 };\n  offsetX = 0;\n  offsetY = 0;\n\n  pin() {\n    this.item.sortingClass = this.sortingClass;\n    this.clone = this.element.cloneNode(true);\n    this.clone.style.position = \"absolute\";\n    this.clone.style.width = this.rect.width + \"px\";\n    this.clone.style.height = this.rect.height + \"px\";\n    this.clone.style.pointerEvents = \"none\";\n    this.clone.style.margin = 0;\n    this.clone.style.zIndex = this.dragZIndex;\n    document.body.appendChild(this.clone);\n  }\n  unpin() {\n    this.item.sortingClass = \"\";\n    document.body.removeChild(this.clone);\n    this.clone = null;\n  }\n  getCenterX() {\n    return this.rect.left + this.rect.width / 2;\n  }\n  getCenterY() {\n    return this.rect.top + this.rect.height / 2;\n  }\n  start(element, item, x, y, viewportScroll, scrollLeft, scrollTop, dragZIndex, axis, sortingClass, minPosX, maxPosX, minPosY, maxPosY) {\n    this.element = element;\n    this.item = item;\n    this.sortingClass = sortingClass;\n    this.dragZIndex = dragZIndex;\n    const rect = (this.rect = element.getBoundingClientRect());\n\n    this.startLeft = rect.left;\n    this.startTop = rect.top;\n\n    this.offsetX = this.startLeft - x;\n    this.offsetY = this.startTop - y;\n\n    this.pin();\n\n    this.update(x, y, viewportScroll, scrollLeft, scrollTop, axis, minPosX, maxPosX, minPosY, maxPosY);\n  }\n  update(x, y, viewportScroll, scrollLeft, scrollTop, axis, minPosX, maxPosX, minPosY, maxPosY) {\n    x += this.offsetX;\n    y += this.offsetY;\n    if (viewportScroll) {\n      x += scrollLeft;\n      y += scrollTop;\n    }\n\n    if (x < minPosX) {\n      x = minPosX;\n    }\n    if (x > maxPosX - this.rect.width) {\n      x = maxPosX - this.rect.width;\n    }\n\n    if (y < minPosY) {\n      y = minPosY;\n    }\n    if (y > maxPosY - this.rect.height) {\n      y = maxPosY - this.rect.height;\n    }\n\n    switch (axis) {\n    case \"x\":\n      y = this.startTop;\n      break;\n    case \"y\":\n      x = this.startLeft;\n      break;\n    }\n\n    this.clone.style.left = x + \"px\";\n    this.clone.style.top = y + \"px\";\n  }\n  end() {\n    if (this.element === null) {\n      return;\n    }\n    this.unpin();\n    this.element = null;\n    this.item = null;\n  }\n}\n"]}